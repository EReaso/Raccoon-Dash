{% extends "base.html" %}

{% block title %}Screensaver{% endblock %}

{% block body %}
<div class="vw-100 vh-100 bg-black d-flex align-items-center justify-content-center">
    <!-- Dynamic Image Source -->
    <img src="{{ image }}" class="img-fluid" style="max-height: 100vh; max-width: 100vw; object-fit: contain;">
</div>

<script>
    // Redirect to the display page on any interaction
    function returnToDisplay() {
        window.location.href = "/display/";
    }

    // Add event listeners when DOM content is loaded
    document.addEventListener("DOMContentLoaded", () => {
        document.addEventListener('mousemove', returnToDisplay);
        document.addEventListener('keypress', returnToDisplay);
        document.addEventListener('click', returnToDisplay);
        document.addEventListener('touchstart', returnToDisplay);

        // Auto-advance to the next photo after a delay
        setTimeout(() => {
            window.location.href = `/screensaver/?num={{ num + 1 }}`;
        }, {{ delay }} * 1000); // Delay in milliseconds
    });
</script>
{% endblock %}
